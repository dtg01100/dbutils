[project]
name = "dbutils-browser"
version = "0.1.0"
description = "GUI Database Browser - Qt-based database schema browser with JDBC support"
readme = "README.md"
requires-python = ">=3.13"
dependencies = [
    "rich>=13.0.0",          # For terminal UI elements
    "textual>=6.6.0",        # For the TUI browser
    "PySide6>=6.5.0",        # For Qt GUI
    "JPype1>=1.5.0",         # For JDBC integration
    "JayDeBeApi>=1.2.3",     # For JDBC integration
]

[build-system]
requires = ["setuptools>=61", "wheel", "Cython>=3.0.0"]
build-backend = "setuptools.build_meta"

[project.optional-dependencies]
  gui = [
      "PySide6>=6.5.0"
  ]
  dev = [
      "ruff>=0.1.0",
      "pytest>=7.0.0",
      "PySide6>=6.5.0",
      "JPype1>=1.5.0",
      "JayDeBeApi>=1.2.3"
  ]
  cython = [
      "cython>=3.0.0",
      "numpy>=1.21.0"
  ]

[project.scripts]
  db-browser = "dbutils.main_launcher:main"
  db-browser-gui = "dbutils.gui.qt_app:main"

[tool.setuptools]
package-dir = {"" = "src"}
packages = {find = {where = ["src"], include = ["dbutils*"]}}

[tool.uv]
package = true

[tool.ruff]
line-length = 120
target-version = "py39"

[tool.ruff.lint]
select = [
    "E",   # pycodestyle errors
    "W",   # pycodestyle warnings
    "F",   # pyflakes
    "I",   # isort
    "C",   # flake8-comprehensions
    "B",   # flake8-bugbear
]

[tool.ruff.lint.per-file-ignores]
"src/dbutils/__init__.py" = ["F401"]
"src/dbutils/db_relate.py" = [
    "E501",  # Allow long lines for SQL queries
    "C901"   # Allow complex function for relationship inference
]
"src/dbutils/map_db.py" = [
    "E501",  # Allow long lines for SQL queries
    "C901"   # Allow complex function for relationship inference
]
"src/dbutils/db_diff.py" = [
    "C901"   # Allow complex function for table comparison
]
"src/dbutils/db_health.py" = [
    "C901"   # Allow complex functions for health checks
]
"src/dbutils/db_search.py" = [
    "E501"   # Allow long lines for SQL queries
]
"src/dbutils/db_browser.py" = [
    "I001",   # Allow imports in try blocks without sorting
    "C901",   # Allow complex functions for search functionality
    "E501"    # Allow long lines for mock data definitions
]